import{_ as x,f as d,r as p,g as m,e as E,c as o,a as A,h as t,F as u,i as b,w as B,j as g,k as v,o as l,t as f,l as D,p as L,m as S,n as V,s as C,q as F,N as M}from"./index-scY1OUHS.js";const n=r=>(L("data-v-3ca9c9bd"),r=r(),S(),r),$={class:"email-div"},j={key:0},U=n(()=>t("h2",null,"Mailing List Emails:",-1)),q={class:"email-list"},z={key:1},H=n(()=>t("p",null,"No data available",-1)),K=[H],O={class:"recipes"},P=n(()=>t("h2",{class:"form-label"},"Add New Recipe",-1)),T=n(()=>t("input",{class:"form-control",name:"RecipeName",placeholder:"Enter Recipe Name"},null,-1)),G=n(()=>t("textarea",{class:"form-control",name:"RecipeBody",placeholder:"Enter Recipe URL"},null,-1)),J=n(()=>t("button",{class:"btn",type:"submit"},"Add Recipe",-1)),Q=[P,T,G,J],W={class:"recipe-div"},X={key:0},Y=n(()=>t("h2",null,"Recipes:",-1)),Z={class:"recipe-list"},ee={class:"card"},te={class:"card-body"},se={class:"card-title"},ie=["href"],ae=["onClick"],ce={key:1},oe=n(()=>t("p",null,"No data available",-1)),le=[oe],ne={__name:"Admin",setup(r){d(()=>{tinymce.init({selector:"textarea#tiny",menu:{edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap hr | pagebreak nonbreaking anchor tableofcontents | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},plugins:["advlist","autolink","link","image","lists","anchor","searchreplace","visualblocks","visualchars","code","fullscreen","insertdatetime","media","table","template","help"]})}),document.addEventListener("focusin",e=>{e.target.closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root")!==null&&e.stopImmediatePropagation()});const h=p(m()),s=E({emails:[],recipes:[],recipeIndices:[]}),k=()=>{g(v(h,"emails")).then(e=>{e.exists()?(Object.values(e.val()).forEach(c=>{s.emails.push(c)}),console.log(s.emails)):console.log("No data available")}).catch(e=>{console.error(e)})},y=e=>{e.preventDefault();const c=m(),a=e.target.RecipeName.value,i=e.target.RecipeBody.value,_=p(c,"recipes"),w=V(_);C(w,{recipeName:a,recipeBody:i}).then(()=>{alert("Successfully Added a New Recipe!","success"),e.target.reset(),location.reload()},I=>{console.log("FAILED...",I.text)})},R=()=>{g(v(h,"recipes")).then(e=>{e.exists()?(e.forEach(c=>{const a=c.key,i=c.val();s.recipes.push(i),s.recipeIndices.push(a)}),console.log("Recipes:",s.recipes),console.log("Recipe Indices:",s.recipeIndices)):console.log("No data available")}).catch(e=>{console.error("Error fetching recipes:",e)})},N=e=>{const c=m(),a=p(c,`recipes/${e}`);F(a).then(()=>{console.log("Recipe deleted successfully"),s.recipes=s.recipes.filter(i=>i.key!==e),location.reload()}).catch(i=>{console.error("Error deleting recipe:",i)})};return d(k),d(R),(e,c)=>(l(),o("div",null,[A(M),t("main",null,[t("div",$,[s.emails.length?(l(),o("div",j,[U,t("ul",q,[(l(!0),o(u,null,b(s.emails,(a,i)=>(l(),o("li",{key:i},f(a.emailAddress),1))),128))])])):(l(),o("div",z,[...K]))]),t("div",O,[t("form",{name:"recipe-form",onSubmit:B(y,["prevent"])},[...Q],32),t("div",W,[s.recipes.length?(l(),o("div",X,[Y,t("div",Z,[(l(!0),o(u,null,b(s.recipes,(a,i)=>(l(),o("div",{key:i},[t("div",ee,[D(' <img src="..." class="card-img-top" alt="..."> '),t("div",te,[t("h3",se,f(a.recipeName),1),t("a",{class:"btn",target:"_blank",href:`${a.recipeBody}`},"View Recipe",8,ie),t("button",{onClick:_=>N(s.recipeIndices[i]),class:"btn btn-sm btn-danger"},"Delete",8,ae)])])]))),128))])])):(l(),o("div",ce,[...le]))])])])]))}},de=x(ne,[["__scopeId","data-v-3ca9c9bd"],["__file","/Users/mattday/Desktop/Coding/IndianSpringsKatahdins/src/views/Admin.vue"]]);export{de as default};
